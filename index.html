<!DOCTYPE html>

<html lang="pt-BR">

<head>

Â Â Â Â <meta charset="UTF-8">

Â Â Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

Â Â Â Â <title>DAMNED RPG - ONLINE GOLD</title>

Â Â Â Â <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>

Â Â Â Â <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth-compat.js"></script>

Â Â Â Â <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

Â Â Â Â 

Â Â Â Â <style>

Â Â Â Â Â Â Â Â :root {Â 

Â Â Â Â Â Â Â Â Â Â Â Â --bg-body: #0a090d; --bg-header: #12101a; --bg-card: #1a1626;Â 

Â Â Â Â Â Â Â Â Â Â Â Â --bg-input: #1f1a2e; --border-color: #3d2a5c; --accent-color: #a370ff;Â 

Â Â Â Â Â Â Â Â Â Â Â Â --text-main: #ffffff; --text-dim: #b0a8c4; --text-input: #ffffff;

Â Â Â Â Â Â Â Â Â Â Â Â --hp-color: #ff4444; --en-color: #4444ff; --ar-color: #cc44ff;

Â Â Â Â Â Â Â Â Â Â Â Â --oc-color: #44ff44; --vi-color: #ffaa44; --co-color: #666666;

Â Â Â Â Â Â Â Â Â Â Â Â --pet-gold: #ffd700;

Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â 

Â Â Â Â Â Â Â Â [data-theme="light"] { --bg-body: #f5f5f5; --bg-header: #ffffff; --bg-card: #ffffff; --bg-input: #eee; --border-color: #ccc; --accent-color: #6200ee; --text-main: #111; --text-dim: #555; --text-input: #000; }

Â Â Â Â Â Â Â Â [data-theme="vampire"] { --bg-body: #1a0505; --bg-header: #2d0a0a; --bg-card: #3d0f0f; --bg-input: #2d0a0a; --border-color: #8b0000; --accent-color: #ff0000; --text-main: #ffe0e0; --text-dim: #a07070; }


Â Â Â Â Â Â Â Â body { margin:0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background: var(--bg-body); color: var(--text-main); padding-bottom: 90px; transition: 0.3s; }


Â Â Â Â Â Â Â Â /* TELA DE LOGIN */

Â Â Â Â Â Â Â Â #auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-body); z-index: 110000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; text-align: center; }

Â Â Â Â Â Â Â Â .auth-box { background: var(--bg-card); padding: 30px; border-radius: 20px; border: 1px solid var(--accent-color); width: 100%; max-width: 350px; box-shadow: 0 0 30px rgba(163, 112, 255, 0.2); }

Â Â Â Â Â Â Â Â .auth-input { width: 100%; padding: 12px; margin-bottom: 15px; background: var(--bg-input); border: 1px solid var(--border-color); color: white; border-radius: 8px; box-sizing: border-box; }

Â Â Â Â Â Â Â Â .btn-auth { width: 100%; padding: 12px; background: var(--accent-color); border: none; color: white; border-radius: 8px; font-weight: bold; margin-bottom: 10px; cursor: pointer; }


Â Â Â Â Â Â Â Â /* LOADING */

Â Â Â Â Â Â Â Â #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 99999; }

Â Â Â Â Â Â Â Â .loader-logo { width: 60px; height: 60px; border: 5px solid #333; border-top: 5px solid var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }

Â Â Â Â Â Â Â Â @keyframes spin { to { transform: rotate(360deg); } }


Â Â Â Â Â Â Â Â /* SIDEBAR */

Â Â Â Â Â Â Â Â #sidebar { position: fixed; top: 0; left: -280px; width: 280px; height: 100%; background: var(--bg-header); z-index: 10001; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); border-right: 3px solid var(--accent-color); padding: 25px; box-sizing: border-box; box-shadow: 10px 0 20px rgba(0,0,0,0.5); }

Â Â Â Â Â Â Â Â #sidebar.open { left: 0; }

Â Â Â Â Â Â Â Â .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: none; backdrop-filter: blur(4px); }

Â Â Â Â Â Â Â Â #btn-menu-global { position: fixed; top: 15px; left: 15px; font-size: 22px; background: var(--bg-header); border: 2px solid var(--accent-color); border-radius: 12px; color: var(--accent-color); cursor: pointer; z-index: 9500; width: 48px; height: 48px; display: none; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }


Â Â Â Â Â Â Â Â /* MENU INICIAL */

Â Â Â Â Â Â Â Â #menu-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.9)), url('https://files.catbox.moe/o5f62o.png') center/cover; z-index: 9000; padding: 20px; box-sizing: border-box; overflow-y: auto; text-align: center; display: none; }

Â Â Â Â Â Â Â Â .char-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 30px 0; }

Â Â Â Â Â Â Â Â .char-card { background: rgba(20, 20, 30, 0.9); border: 2px solid var(--border-color); border-radius: 15px; padding: 15px; transition: 0.3s; position: relative; }

Â Â Â Â Â Â Â Â .char-card:active { transform: scale(0.95); border-color: var(--accent-color); }

Â Â Â Â Â Â Â Â .char-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 10px; margin-bottom: 10px; border: 1px solid var(--accent-color); }


Â Â Â Â Â Â Â Â /* CABEÃ‡ALHO */

Â Â Â Â Â Â Â Â header { display:flex; gap:15px; padding: 20px; background: var(--bg-header); border-bottom: 3px solid var(--accent-color); }

Â Â Â Â Â Â Â Â #imgChar { width: 110px; height: 150px; object-fit: cover; border-radius: 12px; border: 2px solid var(--accent-color); box-shadow: 0 0 15px rgba(163, 112, 255, 0.3); }

Â Â Â Â Â Â Â Â .header-fields { flex: 1; display: flex; flex-direction: column; gap: 8px; }

Â Â Â Â Â Â Â Â .header-fields input { background: var(--bg-input); border: 1px solid var(--border-color); color: #fff; padding: 8px; border-radius: 6px; font-size: 13px; }


Â Â Â Â Â Â Â Â /* TABS */

Â Â Â Â Â Â Â Â .tabs-wrapper { overflow-x: auto; background: var(--bg-header); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border-color); }

Â Â Â Â Â Â Â Â .tabs { display: flex; white-space: nowrap; padding: 5px; }

Â Â Â Â Â Â Â Â .tab-btn { padding: 12px 20px; background: none; border: none; color: var(--text-dim); font-weight: bold; font-size: 12px; text-transform: uppercase; cursor: pointer; }

Â Â Â Â Â Â Â Â .tab-btn.active { color: var(--accent-color); border-bottom: 3px solid var(--accent-color); }


Â Â Â Â Â Â Â Â /* SEÃ‡Ã•ES */

Â Â Â Â Â Â Â Â .section { display: none; padding: 20px; animation: slideUp 0.3s ease-out; }

Â Â Â Â Â Â Â Â .section.active { display: block; }

Â Â Â Â Â Â Â Â @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }


Â Â Â Â Â Â Â Â /* STATUS BARS */

Â Â Â Â Â Â Â Â .status-container { display: grid; gap: 15px; }

Â Â Â Â Â Â Â Â .bar-card { background: var(--bg-card); padding: 15px; border-radius: 15px; border: 1px solid var(--border-color); box-shadow: 0 4px 6px rgba(0,0,0,0.2); }

Â Â Â Â Â Â Â Â .bar-label { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; font-size: 14px; }

Â Â Â Â Â Â Â Â .bar-outer { height: 16px; background: #000; border-radius: 8px; overflow: hidden; border: 1px solid #333; margin-bottom: 12px; }

Â Â Â Â Â Â Â Â .bar-inner { height: 100%; transition: 0.6s cubic-bezier(0.17, 0.67, 0.83, 0.67); }

Â Â Â Â Â Â Â Â .bar-btns { display: grid; grid-template-columns: repeat(4, 1fr) 60px; gap: 6px; }

Â Â Â Â Â Â Â Â .bar-btns button { padding: 10px 0; border: none; border-radius: 6px; background: #2a243d; color: #fff; font-weight: bold; font-size: 12px; }

Â Â Â Â Â Â Â Â .bar-btns button:active { background: var(--accent-color); }

Â Â Â Â Â Â Â Â .max-input { background: #000; border: 1px solid var(--border-color); color: var(--accent-color); text-align: center; border-radius: 6px; font-weight: bold; }


Â Â Â Â Â Â Â Â /* LISTAS */

Â Â Â Â Â Â Â Â .add-box { background: var(--bg-card); padding: 15px; border-radius: 12px; border: 1px dashed var(--accent-color); margin-bottom: 20px; }

Â Â Â Â Â Â Â Â .card-item { background: var(--bg-card); padding: 15px; border-radius: 12px; margin-bottom: 12px; border-left: 5px solid var(--accent-color); position: relative; box-shadow: 0 3px 6px rgba(0,0,0,0.2); }

Â Â Â Â Â Â Â Â .card-item h4 { margin: 0 0 5px 0; color: var(--accent-color); font-size: 16px; cursor: pointer; }

Â Â Â Â Â Â Â Â .card-item p { margin: 0; font-size: 13px; color: var(--text-dim); line-height: 1.4; cursor: pointer; }

Â Â Â Â Â Â Â Â .btn-delete { position: absolute; top: 10px; right: 10px; background: rgba(255,0,0,0.1); color: #ff4444; border: 1px solid #ff4444; border-radius: 5px; padding: 4px 8px; font-size: 10px; }


Â Â Â Â Â Â Â Â /* PETS GOLD SYSTEM */

Â Â Â Â Â Â Â Â .pet-card { border-left-color: var(--pet-gold); background: linear-gradient(90deg, rgba(255,215,0,0.05) 0%, var(--bg-card) 100%); border-right: 1px solid rgba(255,215,0,0.2); }

Â Â Â Â Â Â Â Â .pet-meta { display: flex; gap: 12px; align-items: center; margin-bottom: 15px; }

Â Â Â Â Â Â Â Â .pet-img { width: 70px; height: 70px; border-radius: 15px; border: 2px solid var(--pet-gold); object-fit: cover; }

Â Â Â Â Â Â Â Â .pet-bar-label { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 11px; font-weight: bold; color: var(--pet-gold); }

Â Â Â Â Â Â Â Â .pet-grid-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px; }

Â Â Â Â Â Â Â Â .pet-stat-box { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; text-align: center; border: 1px solid #444; font-size: 12px; }


Â Â Â Â Â Â Â Â /* FOOTER */

Â Â Â Â Â Â Â Â .footer { position: fixed; bottom: 0; width: 100%; background: var(--bg-header); padding: 15px; display: flex; gap: 10px; border-top: 2px solid var(--accent-color); box-sizing: border-box; }

Â Â Â Â Â Â Â Â .btn-undo { flex: 1; padding: 15px; background: #333; color: #fff; border: none; border-radius: 10px; font-weight: bold; }

Â Â Â Â Â Â Â Â .btn-redo { flex: 1; padding: 15px; background: #444; color: #fff; border: none; border-radius: 10px; font-weight: bold; }


Â Â Â Â Â Â Â Â .btn-add-main { width: 100%; padding: 12px; background: var(--accent-color); color: #fff; border: none; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer; }

Â Â Â Â Â Â Â Â textarea { width: 100%; background: var(--bg-input); border: 1px solid var(--border-color); color: #fff; border-radius: 6px; padding: 10px; box-sizing: border-box; resize: vertical; }

Â Â Â Â Â Â Â Â input { background: var(--bg-input); border: 1px solid var(--border-color); color: #fff; padding: 10px; border-radius: 6px; box-sizing: border-box; }

Â Â Â Â </style>

</head>

<body data-theme="dark">


<div id="auth-screen">

Â Â Â Â <div class="auth-box">

Â Â Â Â Â Â Â Â <h2 style="color:var(--accent-color); margin-bottom:25px;">DAMNED LOGIN</h2>

Â Â Â Â Â Â Â Â <input type="email" id="login-email" class="auth-input" placeholder="Seu E-mail">

Â Â Â Â Â Â Â Â <input type="password" id="login-senha" class="auth-input" placeholder="Sua Senha">

Â Â Â Â Â Â Â Â <button class="btn-auth" onclick="fazerLogin()">ACESSAR FICHA</button>

Â Â Â Â Â Â Â Â <button class="btn-auth" style="background:transparent; border:1px solid var(--accent-color);" onclick="criarConta()">CRIAR NOVA CONTA</button>

Â Â Â Â Â Â Â Â <p id="auth-msg" style="color:#ff4444; font-size:12px; margin-top:10px;"></p>

Â Â Â Â </div>

</div>


<div id="loading-screen"><div class="loader-logo"></div><p style="color:white; margin-top:15px; font-size:12px; letter-spacing:2px;">SINCRONIZANDO NUVEM...</p></div>


<button id="btn-menu-global" onclick="toggleSidebar()">â˜°</button>


<div id="sidebar">

Â Â Â Â <h2 style="color: var(--accent-color); margin-bottom:30px;">MENU GOLD</h2>

Â Â Â Â <div style="padding: 18px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;" onclick="cycleTheme()">ğŸŒ“ Alternar Tema</div>

Â Â Â Â <div style="padding: 18px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;" onclick="exportarFicha()">ğŸ“¥ Exportar Ficha (.json)</div>

Â Â Â Â <div style="padding: 18px 0; border-bottom: 1px solid var(--border-color); cursor: pointer;" onclick="importarFicha()">ğŸ“¤ Importar Ficha</div>

Â Â Â Â <div style="padding: 18px 0; color: #ff4444; cursor: pointer; margin-top: 20px;" onclick="abrirMenu()">ğŸšª Lista de Fichas</div>

Â Â Â Â <div style="padding: 18px 0; color: #ff4444; cursor: pointer;" onclick="fazerLogout()">ğŸ”Œ Sair da Conta</div>

Â Â Â Â <div style="position: absolute; bottom: 20px; font-size: 10px; color: var(--text-dim);">V32.9 ONLINE - DAMNED RPG</div>

</div>

<div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>


<div id="menu-screen">

Â Â Â Â <h1 style="color:#fff; margin-top:60px; font-size: 32px; text-shadow: 0 0 15px var(--accent-color);">DAMNED RPG</h1>

Â Â Â Â <p id="user-display" style="color: var(--text-dim); margin-bottom: 40px;">Sincronizado</p>

Â Â Â Â <button onclick="novoPersonagem()" style="width:100%; padding:20px; background:var(--accent-color); color:#fff; border:none; border-radius:15px; font-weight:bold; font-size:16px; box-shadow: 0 5px 15px rgba(0,0,0,0.4);">+ CRIAR NOVA FICHA</button>

Â Â Â Â <div id="lista-personagens" class="char-grid"></div>

</div>


<div id="sheet-content" style="display:none;">

Â Â Â Â <header>

Â Â Â Â Â Â Â Â <img id="imgChar" onclick="triggerImg()" src="https://via.placeholder.com/110x150">

Â Â Â Â Â Â Â Â <input type="file" id="fileInput" accept="image/*" style="display:none" onchange="uploadImagem(event)">

Â Â Â Â Â Â Â Â <div class="header-fields">

Â Â Â Â Â Â Â Â Â Â Â Â <input id="nome" placeholder="Nome do Personagem" onchange="salvarHeader()">

Â Â Â Â Â Â Â Â Â Â Â Â <div style="display:flex; gap:5px;">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="idade" placeholder="Idade" style="width:40%" onchange="salvarHeader()">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="raca" placeholder="RaÃ§a" style="flex:1" onchange="salvarHeader()">

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <input id="classe" placeholder="Classe / OcupaÃ§Ã£o" onchange="salvarHeader()">

Â Â Â Â Â Â Â Â </div>

Â Â Â Â </header>


Â Â Â Â <div class="tabs-wrapper">

Â Â Â Â Â Â Â Â <div class="tabs">

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn active" onclick="switchTab(event, 0)">Status</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 1)">Atributos</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 2)">Poderes</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 3)">Arsenal</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 4)">Defesa</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 5)">Itens</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 6)">PenitÃªncia</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 7)">DiÃ¡rio</button>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="tab-btn" onclick="switchTab(event, 8)">Mascotes</button>

Â Â Â Â Â Â Â Â </div>

Â Â Â Â </div>


Â Â Â Â <div class="section active" id="sec-0">

Â Â Â Â Â Â Â Â <div id="status-bars-container" class="status-container"></div>

Â Â Â Â </div>


Â Â Â Â <div class="section" id="sec-1"><div class="add-box"><div style="display:flex; gap:10px;"><input id="atN" placeholder="Ex: ForÃ§a" style="flex:1"><input id="atV" type="number" placeholder="Valor" style="width:80px"></div><button class="btn-add-main" onclick="addAtributo()">ADICIONAR ATRIBUTO</button></div><div id="listaAt"></div></div>

Â Â Â Â <div class="section" id="sec-2"><div class="add-box"><input id="pdN" placeholder="Nome do Poder"><textarea id="pdD" placeholder="DescriÃ§Ã£o completa do efeito..." rows="3"></textarea><button class="btn-add-main" onclick="addItem('habilidades',['pdN','pdD'],['n','d'])">ADICIONAR PODER</button></div><div id="listaPd"></div></div>

Â Â Â Â <div class="section" id="sec-3"><div class="add-box"><input id="arN" placeholder="Nome da Arma"><input id="arDan" placeholder="Dano (ex: 2d10 + 5)"><textarea id="arD" placeholder="Efeitos especiais..." rows="2"></textarea><button class="btn-add-main" onclick="addItem('armas',['arN','arDan','arD'],['n','dan','d'])">ADICIONAR AO ARSENAL</button></div><div id="listaAr"></div></div>

Â Â Â Â <div class="section" id="sec-4"><div style="background:var(--accent-color); color:white; padding:20px; border-radius:15px; text-align:center; margin-bottom:20px; box-shadow:0 10px 20px rgba(0,0,0,0.3);"><div style="font-size:12px; opacity:0.8; text-transform:uppercase;">Defesa Total Estimada</div><div id="defTotal" style="font-size:42px; font-weight:900;">0</div></div><div class="add-box"><input id="eqN" placeholder="Equipamento"><input id="eqV" type="number" placeholder="Defesa"><button class="btn-add-main" onclick="addItem('equipamentos',['eqN','eqV'],['n','v'])">EQUIPAR</button></div><div id="listaEq"></div></div>

Â Â Â Â <div class="section" id="sec-5"><div class="add-box"><div style="display:flex; gap:10px;"><input id="invN" placeholder="Item" style="flex:1"><input id="invQ" placeholder="Qtd" style="width:70px"></div><textarea id="invD" placeholder="DescriÃ§Ã£o..." rows="2"></textarea><button class="btn-add-main" onclick="addItem('inventario',['invN','invQ','invD'],['n','q','d'])">GUARDAR ITEM</button></div><div id="listaInv"></div></div>

Â Â Â Â <div class="section" id="sec-6"><div class="add-box"><input id="peN" placeholder="Nome da PenitÃªncia"><textarea id="peD" placeholder="DescriÃ§Ã£o..." rows="3"></textarea><button class="btn-add-main" onclick="addItem('penitencias',['peN','peD'],['n','d'])">ADICIONAR PENITÃŠNCIA</button></div><div id="listaPe"></div></div>

Â Â Â Â <div class="section" id="sec-7"><h3 style="color:var(--accent-color)">HistÃ³ria</h3><textarea id="historia" style="height:200px;" onchange="salvarDiario()"></textarea><h3 style="color:var(--accent-color); margin-top:20px;">Notas</h3><textarea id="anotacoes" style="height:300px;" onchange="salvarDiario()"></textarea></div>


Â Â Â Â <div class="section" id="sec-8">

Â Â Â Â Â Â Â Â <div class="add-box">

Â Â Â Â Â Â Â Â Â Â Â Â <div style="text-align:center; margin-bottom:15px;">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <img id="petPreview" src="https://via.placeholder.com/80" style="width:80px; height:80px; border-radius:15px; border:2px solid var(--pet-gold); object-fit:cover; display:none; margin: 0 auto 10px;">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="document.getElementById('petImgInput').click()" style="background:#333; color:white; border:1px solid var(--pet-gold); padding:8px 15px; border-radius:20px; font-size:11px; cursor:pointer;">ğŸ“· CARREGAR FOTO</button>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="file" id="petImgInput" accept="image/*" style="display:none" onchange="previewPet(event)">

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <div style="display:grid; grid-template-columns: 2fr 1fr; gap:10px; margin-bottom:10px;">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="petN" placeholder="Nome do Mascote">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="petLvl" placeholder="NÃ­vel">

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="pet-grid-stats" style="grid-template-columns: 1fr 1fr 1fr;">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="petV" placeholder="HP Max" type="number">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="petDef" placeholder="DEF">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input id="petAtk" placeholder="ATK">

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <textarea id="petD" placeholder="Habilidades e Notas..." style="margin-top:10px;"></textarea>

Â Â Â Â Â Â Â Â Â Â Â Â <button class="btn-add-main" style="background:var(--pet-gold); color:#000;" onclick="addPetFull()">VINCULAR COMPANHEIRO</button>

Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â <div id="listaPets"></div>

Â Â Â Â </div>


Â Â Â Â <div class="footer">

Â Â Â Â Â Â Â Â <button class="btn-undo" onclick="desfazer()">â†© VOLTAR</button>

Â Â Â Â Â Â Â Â <button class="btn-redo" onclick="refazer()">AVANÃ‡AR â†ª</button>

Â Â Â Â </div>

</div>


<script>

// ==========================================

// CONFIGURAÃ‡ÃƒO DO FIREBASE (SUBSTITUA AQUI)

// ==========================================

const firebaseConfig = {

Â Â apiKey: "AIzaSyCffwVZ3zoM0GJNIcMdebDPXogfKq_bp-w",

Â Â authDomain: "damned-rpg.firebaseapp.com",

Â Â databaseURL: "https://damned-rpg-default-rtdb.firebaseio.com",

Â Â projectId: "damned-rpg",

Â Â storageBucket: "damned-rpg.firebasestorage.app",

Â Â messagingSenderId: "753626576411",

Â Â appId: "1:753626576411:web:0b100a3f64b9d9fec8eabe"

};


firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();

const rtdb = firebase.database();

let userUID = null;


// ==========================================

// VARIÃVEIS DE ESTADO

// ==========================================

let db = [];

let cur = -1; let ficha = {}; let undo = []; let redo = [];

let tempPetImg = "";


// ==========================================

// SISTEMA DE AUTENTICAÃ‡ÃƒO

// ==========================================

auth.onAuthStateChanged(user => {

Â Â Â Â if (user) {

Â Â Â Â Â Â Â Â userUID = user.uid;

Â Â Â Â Â Â Â Â document.getElementById('auth-screen').style.display = 'none';

Â Â Â Â Â Â Â Â document.getElementById('loading-screen').style.display = 'flex';

Â Â Â Â Â Â Â Â document.getElementById('user-display').innerText = "Logado como: " + user.email;

Â Â Â Â Â Â Â Â carregarFichasOnline();

Â Â Â Â } else {

Â Â Â Â Â Â Â Â document.getElementById('auth-screen').style.display = 'flex';

Â Â Â Â Â Â Â Â document.getElementById('menu-screen').style.display = 'none';

Â Â Â Â Â Â Â Â document.getElementById('sheet-content').style.display = 'none';

Â Â Â Â Â Â Â Â document.getElementById('btn-menu-global').style.display = 'none';

Â Â Â Â }

});


function criarConta() {

Â Â Â Â const email = document.getElementById('login-email').value;

Â Â Â Â const senha = document.getElementById('login-senha').value;

Â Â Â Â if(!email || !senha) return alert("Preencha tudo!");

Â Â Â Â auth.createUserWithEmailAndPassword(email, senha)

Â Â Â Â Â Â Â Â .catch(error => document.getElementById('auth-msg').innerText = error.message);

}


function fazerLogin() {

Â Â Â Â const email = document.getElementById('login-email').value;

Â Â Â Â const senha = document.getElementById('login-senha').value;

Â Â Â Â auth.signInWithEmailAndPassword(email, senha)

Â Â Â Â Â Â Â Â .catch(error => document.getElementById('auth-msg').innerText = "Erro: Email ou senha incorretos.");

}


function fazerLogout() {

Â Â Â Â if(confirm("Deseja sair da conta?")) auth.signOut();

}


// ==========================================

// LOGICA DE DADOS (ONLINE)

// ==========================================

function carregarFichasOnline() {

Â Â Â Â rtdb.ref('users/' + userUID + '/fichas').once('value', (snapshot) => {

Â Â Â Â Â Â Â Â db = snapshot.val() || [];

Â Â Â Â Â Â Â Â setTimeout(() => {

Â Â Â Â Â Â Â Â Â Â Â Â document.getElementById('loading-screen').style.display = 'none';

Â Â Â Â Â Â Â Â Â Â Â Â abrirMenu();

Â Â Â Â Â Â Â Â }, 800);

Â Â Â Â });

}


function salvarNoBanco() {

Â Â Â Â if (cur !== -1) db[cur] = JSON.parse(JSON.stringify(ficha));

Â Â Â Â if (userUID) {

Â Â Â Â Â Â Â Â // Salva local para agilidade e online para seguranÃ§a

Â Â Â Â Â Â Â Â localStorage.setItem('RPG_GOLD_V32', JSON.stringify(db));

Â Â Â Â Â Â Â Â rtdb.ref('users/' + userUID + '/fichas').set(db);

Â Â Â Â }

}


// ==========================================

// FUNÃ‡Ã•ES DA FICHA (ADAPTADAS)

// ==========================================

function abrirMenu() {

Â Â Â Â cur = -1;Â 

Â Â Â Â document.getElementById('sheet-content').style.display = 'none';

Â Â Â Â document.getElementById('btn-menu-global').style.display = 'none';

Â Â Â Â document.getElementById('menu-screen').style.display = 'block';

Â Â Â Â renderListaMenu();

}


function renderListaMenu() {

Â Â Â Â const l = document.getElementById('lista-personagens'); l.innerHTML = '';

Â Â Â Â db.forEach((c, i) => {

Â Â Â Â Â Â Â Â l.innerHTML += `

Â Â Â Â Â Â Â Â Â Â Â Â <div class="char-card" onclick="selecionar(${i})">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <img src="${c.img || 'https://via.placeholder.com/150'}">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <b style="display:block; margin-bottom:5px;">${c.nome}</b>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size:10px; color:var(--text-dim)">${c.classe || 'Sem Classe'}</span>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="event.stopPropagation(); apagar(${i})" style="position:absolute; top:-10px; right:-10px; background:#ff4444; border:none; color:white; border-radius:50%; width:25px; height:25px;">Ã—</button>

Â Â Â Â Â Â Â Â Â Â Â Â </div>`;

Â Â Â Â });

}


function selecionar(i) {

Â Â Â Â cur = i; ficha = JSON.parse(JSON.stringify(db[i]));

Â Â Â Â if(!ficha.pets) ficha.pets = [];

Â Â Â Â document.getElementById('menu-screen').style.display = 'none';

Â Â Â Â document.getElementById('btn-menu-global').style.display = 'flex';

Â Â Â Â document.getElementById('sheet-content').style.display = 'block';

Â Â Â Â renderFicha();

}


function novoPersonagem() {

Â Â Â Â const novo = {

Â Â Â Â Â Â Â Â nome: 'Nova Lenda', idade:'', raca:'', classe:'', img:'',

Â Â Â Â Â Â Â Â pv: 20, pvMax: 20, pe: 20, peMax: 20, arc: 0, arcMax: 10, ocu: 0, ocuMax: 10, vin: 0, vinMax: 10, corr: 0, corrMax: 10,

Â Â Â Â Â Â Â Â atributos: {}, habilidades: [], armas: [], equipamentos: [], inventario: [], penitencias: [],

Â Â Â Â Â Â Â Â historia: '', anotacoes: '', pets: []

Â Â Â Â };

Â Â Â Â db.push(novo);Â 

Â Â Â Â salvarNoBanco();Â 

Â Â Â Â renderListaMenu();

}


// --- RESTANTE DAS FUNÃ‡Ã•ES ORIGINAIS (MANTIDAS) ---

function cycleTheme() {

Â Â Â Â const themes = ['dark', 'light', 'vampire'];

Â Â Â Â let current = document.body.getAttribute('data-theme');

Â Â Â Â let next = themes[(themes.indexOf(current) + 1) % themes.length];

Â Â Â Â document.body.setAttribute('data-theme', next);

Â Â Â Â localStorage.setItem('GOLD_THEME', next);

}


function toggleSidebar() {

Â Â Â Â const s = document.getElementById('sidebar'), o = document.getElementById('overlay');

Â Â Â Â const open = s.classList.toggle('open');

Â Â Â Â o.style.display = open ? 'block' : 'none';

}


function switchTab(e, idx) {

Â Â Â Â document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));

Â Â Â Â document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

Â Â Â Â e.target.classList.add('active');

Â Â Â Â document.getElementById(`sec-${idx}`).classList.add('active');

Â Â Â Â window.scrollTo(0,0);

}


function apagar(i) { if(confirm("Deseja apagar esta lenda?")) { db.splice(i, 1); salvarNoBanco(); renderListaMenu(); } }

function snap() { undo.push(JSON.stringify(ficha)); redo = []; if(undo.length > 30) undo.shift(); }

function triggerImg() { document.getElementById('fileInput').click(); }

function uploadImagem(e) {

Â Â Â Â const reader = new FileReader();

Â Â Â Â reader.onload = (ev) => { snap(); ficha.img = ev.target.result; renderFicha(); };

Â Â Â Â reader.readAsDataURL(e.target.files[0]);

}

function previewPet(e) {

Â Â Â Â const reader = new FileReader();

Â Â Â Â reader.onload = (ev) => { tempPetImg = ev.target.result; document.getElementById('petPreview').src = tempPetImg; document.getElementById('petPreview').style.display = 'block'; };

Â Â Â Â reader.readAsDataURL(e.target.files[0]);

}


function editar(caminho, idx, campo, rotulo) {

Â Â Â Â let atual = (caminho === 'at') ? ((campo === 'n') ? idx : ficha.atributos[idx]) : ficha[caminho][idx][campo];

Â Â Â Â let novo = prompt(`Editar ${rotulo}:`, atual);

Â Â Â Â if(novo !== null) {

Â Â Â Â Â Â Â Â snap();

Â Â Â Â Â Â Â Â if(caminho === 'at') {

Â Â Â Â Â Â Â Â Â Â Â Â if(campo === 'n') { let val = ficha.atributos[idx]; delete ficha.atributos[idx]; ficha.atributos[novo] = val; }

Â Â Â Â Â Â Â Â Â Â Â Â else ficha.atributos[idx] = novo;

Â Â Â Â Â Â Â Â } else { ficha[caminho][idx][campo] = novo; }

Â Â Â Â Â Â Â Â renderFicha();

Â Â Â Â }

}


function modVal(attr, qtd) { snap(); ficha[attr] = (parseInt(ficha[attr]) || 0) + qtd; renderFicha(); }

function setMax(attr, val) { snap(); ficha[attr+'Max'] = parseInt(val) || 0; renderFicha(); }


function modPetHp(idx, qtd) {

Â Â Â Â snap(); let p = ficha.pets[idx];

Â Â Â Â p.v = (parseInt(p.v) || 0) + qtd; renderFicha();

}


function setPetMaxHp(idx, val) {

Â Â Â Â snap(); ficha.pets[idx].vmax = parseInt(val) || 0; renderFicha();

}


function addAtributo() {

Â Â Â Â const n = document.getElementById('atN').value, v = document.getElementById('atV').value;

Â Â Â Â if(!n) return; snap(); ficha.atributos[n] = v; renderFicha();

}


function addItem(key, ids, props) {

Â Â Â Â const vals = ids.map(id => document.getElementById(id).value);

Â Â Â Â if(!vals[0]) return; snap();

Â Â Â Â let obj = {}; props.forEach((p, i) => obj[p] = vals[i]);

Â Â Â Â ficha[key].push(obj); renderFicha();

}


function addPetFull() {

Â Â Â Â const n = document.getElementById('petN').value; if(!n) return;

Â Â Â Â snap();

Â Â Â Â let max = document.getElementById('petV').value || 10;

Â Â Â Â ficha.pets.push({

Â Â Â Â Â Â Â Â n: n, img: tempPetImg, v: max, vmax: max, lvl: document.getElementById('petLvl').value || '1',

Â Â Â Â Â Â Â Â def: document.getElementById('petDef').value, atk: document.getElementById('petAtk').value, d: document.getElementById('petD').value

Â Â Â Â });

Â Â Â Â tempPetImg = ""; renderFicha();

}


function remover(key, idx) { snap(); if(key === 'at') delete ficha.atributos[idx]; else ficha[key].splice(idx, 1); renderFicha(); }

function salvarHeader() { ficha.nome = document.getElementById('nome').value; ficha.idade = document.getElementById('idade').value; ficha.raca = document.getElementById('raca').value; ficha.classe = document.getElementById('classe').value; salvarNoBanco(); }

function salvarDiario() { ficha.historia = document.getElementById('historia').value; ficha.anotacoes = document.getElementById('anotacoes').value; salvarNoBanco(); }


function renderFicha() {

Â Â Â Â document.getElementById('nome').value = ficha.nome || '';

Â Â Â Â document.getElementById('idade').value = ficha.idade || '';

Â Â Â Â document.getElementById('raca').value = ficha.raca || '';

Â Â Â Â document.getElementById('classe').value = ficha.classe || '';

Â Â Â Â document.getElementById('imgChar').src = ficha.img || 'https://via.placeholder.com/110x150';


Â Â Â Â const sCont = document.getElementById('status-bars-container');

Â Â Â Â sCont.innerHTML = '';

Â Â Â Â const stats = [{id:'pv', n:'Pontos de Vida', c:'var(--hp-color)'},{id:'pe', n:'Energia / Mana', c:'var(--en-color)'},{id:'arc', n:'NÃ­vel Arcano', c:'var(--ar-color)'},{id:'ocu', n:'Ocultismo', c:'var(--oc-color)'},{id:'vin', n:'VÃ­nculo', c:'var(--vi-color)'},{id:'corr', n:'CorrupÃ§Ã£o', c:'var(--co-color)'}];


Â Â Â Â stats.forEach(s => {

Â Â Â Â Â Â Â Â let curV = parseInt(ficha[s.id]) || 0; let maxV = parseInt(ficha[s.id+'Max']) || 1;

Â Â Â Â Â Â Â Â let perc = Math.min(100, (curV / maxV) * 100);

Â Â Â Â Â Â Â Â sCont.innerHTML += `<div class="bar-card"><div class="bar-label"><span>${s.n}</span><span>${curV} / ${maxV}</span></div><div class="bar-outer"><div class="bar-inner" style="width:${perc}%; background:${s.c}; box-shadow: 0 0 10px ${s.c}66;"></div></div><div class="bar-btns"><button onclick="modVal('${s.id}',-5)">-5</button><button onclick="modVal('${s.id}',-1)">-1</button><button onclick="modVal('${s.id}',1)">+1</button><button onclick="modVal('${s.id}',5)">+5</button><input type="number" class="max-input" value="${maxV}" onchange="setMax('${s.id}', this.value)"></div></div>`;

Â Â Â Â });


Â Â Â Â renderGeneric('listaAt', ficha.atributos, 'at', (k, v) => `<div class="card-item"><button class="btn-delete" onclick="remover('at','${k}')">X</button><h4 onclick="editar('at','${k}','n','Atributo')">${k}</h4><p onclick="editar('at','${k}','v','Valor')">${v}</p></div>`);

Â Â Â Â renderGeneric('listaPd', ficha.habilidades, 'h', (it, i) => `<div class="card-item"><button class="btn-delete" onclick="remover('habilidades',${i})">X</button><h4 onclick="editar('habilidades',${i},'n','Poder')">${it.n}</h4><p onclick="editar('habilidades',${i},'d','DescriÃ§Ã£o')">${it.d}</p></div>`);

Â Â Â Â renderGeneric('listaAr', ficha.armas, 'a', (it, i) => `<div class="card-item"><button class="btn-delete" onclick="remover('armas',${i})">X</button><h4 onclick="editar('armas',${i},'n','Arma')">${it.n}</h4><p onclick="editar('armas',${i},'dan','Dano')">Dano: ${it.dan}</p><p onclick="editar('armas',${i},'d','Efeito')">${it.d}</p></div>`);

Â Â Â Â renderGeneric('listaInv', ficha.inventario, 'inv', (it, i) => `<div class="card-item"><button class="btn-delete" onclick="remover('inventario',${i})">X</button><h4 onclick="editar('inventario',${i},'n','Item')">${it.n} (x${it.q})</h4><p onclick="editar('inventario',${i},'d','DescriÃ§Ã£o')">${it.d}</p></div>`);

Â Â Â Â renderGeneric('listaPe', ficha.penitencias, 'p', (it, i) => `<div class="card-item"><button class="btn-delete" onclick="remover('penitencias',${i})">X</button><h4 onclick="editar('penitencias',${i},'n','PenitÃªncia')">${it.n}</h4><p onclick="editar('penitencias',${i},'d','DescriÃ§Ã£o')">${it.d}</p></div>`);

Â Â Â Â 

Â Â Â Â renderGeneric('listaPets', ficha.pets, 'pet', (it, i) => {

Â Â Â Â Â Â Â Â let curV = parseInt(it.v) || 0; let maxV = parseInt(it.vmax) || 1;

Â Â Â Â Â Â Â Â let perc = Math.min(100, (curV / maxV) * 100);

Â Â Â Â Â Â Â Â return `

Â Â Â Â Â Â Â Â <div class="card-item pet-card">

Â Â Â Â Â Â Â Â Â Â Â Â <button class="btn-delete" onclick="remover('pets',${i})">X</button>

Â Â Â Â Â Â Â Â Â Â Â <div class="pet-meta">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <img src="${it.img || 'https://via.placeholder.com/70'}" class="pet-img">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h4 onclick="editar('pets',${i},'n','Nome')">${it.n}</h4>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size:10px; color:var(--pet-gold)">NÃ­vel: <b onclick="editar('pets',${i},'lvl','NÃ­vel')">${it.lvl}</b></span>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="pet-bar-label"><span>HP DO PET</span><span>${curV} / ${maxV}</span></div>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="bar-outer"><div class="bar-inner" style="width:${perc}%; background:var(--pet-gold);"></div></div>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="bar-btns">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="modPetHp(${i},-1)">-1</button><button onclick="modPetHp(${i},1)">+1</button>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" class="max-input" value="${maxV}" onchange="setPetMaxHp(${i}, this.value)">

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="pet-grid-stats">

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="pet-stat-box" onclick="editar('pets',${i},'def','DEF')">ğŸ›¡ï¸ DEF: ${it.def}</div>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="pet-stat-box" onclick="editar('pets',${i},'atk','ATK')">âš”ï¸ ATK: ${it.atk}</div>

Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â </div>`});


Â Â Â Â let totalDef = 0;

Â Â Â Â renderGeneric('listaEq', ficha.equipamentos, 'e', (it, i) => {

Â Â Â Â Â Â Â Â totalDef += (parseInt(it.v) || 0);

Â Â Â Â Â Â Â Â return `<div class="card-item"><button class="btn-delete" onclick="remover('equipamentos',${i})">X</button><h4>${it.n}</h4><p>Defesa: +${it.v}</p></div>`;

Â Â Â Â });

Â Â Â Â document.getElementById('defTotal').innerText = totalDef;

Â Â Â Â salvarNoBanco();

}


function renderGeneric(id, data, type, temp) {

Â Â Â Â const el = document.getElementById(id); el.innerHTML = '';

Â Â Â Â if(!data) return;

Â Â Â Â if(type === 'at') Object.keys(data).forEach(k => el.innerHTML += temp(k, data[k]));

Â Â Â Â else data.forEach((item, i) => el.innerHTML += temp(item, i));

}


function desfazer() { if(undo.length > 0) { redo.push(JSON.stringify(ficha)); ficha = JSON.parse(undo.pop()); renderFicha(); } }

function refazer() { if(redo.length > 0) { undo.push(JSON.stringify(ficha)); ficha = JSON.parse(redo.pop()); renderFicha(); } }

function exportarFicha() { const data = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(ficha)); const a = document.createElement('a'); a.href = data; a.download = (ficha.nome || 'ficha') + ".json"; a.click(); }

function importarFicha() { const input = document.createElement('input'); input.type = 'file'; input.onchange = e => { const file = e.target.files[0]; const reader = new FileReader(); reader.onload = ev => { snap(); ficha = JSON.parse(ev.target.result); renderFicha(); }; reader.readAsText(file); }; input.click(); }

</script>

</body>

</html>


